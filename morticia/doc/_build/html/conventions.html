

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>MORTICIA Conventions &mdash; MORTICIA 1.0 documentation</title>
  

  
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic|Roboto+Slab:400,700|Inconsolata:400,700&subset=latin,cyrillic' rel='stylesheet' type='text/css'>

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="MORTICIA 1.0 documentation" href="index.html"/> 

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        
          <a href="index.html" class="fa fa-home"> MORTICIA</a>
        
        
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
          
          
              <ul>
<li class="toctree-l1"><a class="reference internal" href="intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="how_to_use.html">How to use MORTICIA</a><ul>
<li class="toctree-l2"><a class="reference internal" href="how_to_use.html#morticia-dependencies">MORTICIA Dependencies</a></li>
<li class="toctree-l2"><a class="reference internal" href="how_to_use.html#installation-and-requirements">Installation and Requirements</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="styleguide.html">The MORTICIA Style Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="styleguide.html#to-pep-8-or-not-to-pep-8">To PEP-8 or not to PEP-8</a></li>
<li class="toctree-l2"><a class="reference internal" href="styleguide.html#code-layout">Code Layout</a></li>
<li class="toctree-l2"><a class="reference internal" href="styleguide.html#import-statements">Import Statements</a></li>
<li class="toctree-l2"><a class="reference internal" href="styleguide.html#whitespace">Whitespace</a></li>
<li class="toctree-l2"><a class="reference internal" href="styleguide.html#comments">Comments</a></li>
<li class="toctree-l2"><a class="reference internal" href="styleguide.html#documentation-strings-docstrings">Documentation Strings (docstrings)</a></li>
<li class="toctree-l2"><a class="reference internal" href="styleguide.html#naming-conventions">Naming Conventions</a></li>
<li class="toctree-l2"><a class="reference internal" href="styleguide.html#pep-257">PEP-257</a></li>
<li class="toctree-l2"><a class="reference internal" href="styleguide.html#from-conventions-section"><em>From</em> Conventions Section</a></li>
<li class="toctree-l2"><a class="reference internal" href="styleguide.html#general-terminology-and-conventions">General Terminology and Conventions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="for_developers.html">For the Developers</a><ul>
<li class="toctree-l2"><a class="reference internal" href="for_developers.html#structure">Structure</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="packages.html">Packages</a><ul>
<li class="toctree-l2"><a class="reference internal" href="packages.html#sensor-package">Sensor Package</a></li>
<li class="toctree-l2"><a class="reference internal" href="packages.html#radiometry-package">Radiometry Package</a></li>
<li class="toctree-l2"><a class="reference internal" href="packages.html#scene-package">Scene Package</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="ChapLibRadtranODandPathRadiance.html">Transmittance and Path Radiance in libRadtran</a></li>
<li class="toctree-l1"><a class="reference internal" href="01a-SpectralChannelsAndFilters.html">IPython Notebook and Sphinx</a><ul>
<li class="toctree-l2"><a class="reference internal" href="01a-SpectralChannelsAndFilters.html#a-spectralchannelsandfilters-ipython-notebook">01a-SpectralChannelsAndFilters IPython Notebook</a></li>
</ul>
</li>
</ul>

          
        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">MORTICIA</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>MORTICIA Conventions</li>
      <li class="wy-breadcrumbs-aside">
        
          <a href="_sources/conventions.txt" rel="nofollow"> View page source</a>
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document">
            
  <div class="section" id="morticia-conventions">
<h1>MORTICIA Conventions<a class="headerlink" href="#morticia-conventions" title="Permalink to this headline">¶</a></h1>
<p>There is a data dictionary for <code class="docutils literal"><span class="pre">MORTICIA</span></code> which defines commonly used variable and data names.</p>
<p>xray.DataArray objects are created routinely, so the constructor is abbreviated to xD.</p>
<p><code class="docutils literal"><span class="pre">MORTICIA</span></code> often deals with spectral variables, such as spectral transmission, spectral radiance etc.
More often than not, these arrays are multidimensional. The <cite>xray</cite> package is used in <cite>MORTICIA</cite> for
purposes of representing N-dimensional arrays (the <cite>xray.DataArray</cite> class).</p>
<p>However, <cite>xray</cite> does not (yet) support interpolation when the coordinates of the data hypercube are
not the same and two or more <cite>xray.DataArray</cite> objects must be added, divided or multiplied.</p>
<p>Utility functions that operate on xray.DataArray objects are found in the <cite>morticia.tools.xd</cite> package.
These functions perform axis harmonisation as well as unit checking and conversion.</p>
<p>The axis harmonisation functions for <cite>xray.DataArray</cite> objects requires that all axes have numeric coordinates.
This applies also to axes that would benefit from having text labels. Text labels would be more appropriate for
axes such as spectral channels and field orientation for MTF data. In the case of spectral channels (with axis label
<cite>chn</cite>) will be channel numbers. These channel numbers would normally start from 0, but in some cases, such as when
using a sub-range of correlated-k band models (e.g. <cite>kato</cite> or <cite>fu</cite> in libRadtran) the channel numbers would be a
range of integers. The convention in <code class="docutils literal"><span class="pre">MORTICIA</span></code> is that the text labels then be placed in an axis attribute called
<cite>labels</cite>.</p>
<p>This curently applies equally well to timeseries. For incorporation in multi-axis <cite>xray.DataArray</cite> objects, timestamps
must be converted to Julian date. A list of labels for such axes can and should be maintained in the <cite>xray.DataArray</cite>
attributes (<cite>attrs</cite>).</p>
<div class="section" id="units-of-measure">
<h2>Units of Measure<a class="headerlink" href="#units-of-measure" title="Permalink to this headline">¶</a></h2>
<p>Tracking of units of measure is not performed automatically in <code class="docutils literal"><span class="pre">MORTICIA</span></code> such as with the use of the pint package.
However, many functions and classes in <code class="docutils literal"><span class="pre">MORTICIA</span></code> expect xray.DataArray instances that provide units of measure in
the metadata. When units are provided in this way, they should be provided in manner consistent with the Python units
package <cite>pint</cite> (see <a class="reference external" href="https://pint.readthedocs.org/">https://pint.readthedocs.org/</a> )</p>
<p>Commonly, when a <code class="docutils literal"><span class="pre">MORTICIA</span></code> function or method requires a scalar numeric input, it must be provided as a list
with magnitude and units e.g. [30, &#8216;mm&#8217;]. Unitless quantities are provided as a simple numeric magnitude.</p>
<p>If a variable is named <code class="docutils literal"><span class="pre">x</span></code>, then the units for the variable can be stored as <code class="docutils literal"><span class="pre">units</span></code> in the xray.DataArray
attributes dictionary (actually an OrderedDict). This units string should be recognizable to <cite>pint</cite> as a valid unit.
When exporting xray.DataArray objects to NetCDF files in xray.Dataset objects, this convention of using the
<cite>units</cite> attribute is recognised by NetCDF browsers and other NetCDF utilities. Further information on conventional
NetCDF attributes can be found at
<a class="reference external" href="https://www.unidata.ucar.edu/software/thredds/current/netcdf-java/metadata/DataDiscoveryAttConvention.html">UCAR/Unidata</a>.
See the <code class="docutils literal"><span class="pre">MORTICIA</span></code> notebooks for examples of creating <cite>xray</cite> objects with unit attributes.</p>
<p>The UCAR/Unidata attributes for NetCDF file elements considered as highly recommended are</p>
<ul class="simple">
<li><cite>units</cite>, units expressed as a string - SI units preferred</li>
<li><cite>long_name</cite>, such as may commonly be used to label graph axes</li>
<li><cite>standard_name</cite>, the standard name that may be used in a specific scientific community</li>
</ul>
<p>and for <code class="docutils literal"><span class="pre">MORTICIA</span></code>, also</p>
<ul class="simple">
<li><cite>title</cite>, such as may be used on the title of a plot of the data</li>
<li><cite>labels</cite>, such as may be used in the legends of a plot</li>
</ul>
<p>The <cite>standard_name</cite> should come from the CF (Climate and Forecasting) name glossary, or the project should have
its own vocabulary of short, standard and long names for all variables. These are to be found in the
<cite>morticia.moglo.py</cite> module and may be expanded or updated from time to time.</p>
<p>A pint global unit registry is created when <cite>morticia</cite> or any sub-package is imported. Any other <cite>morticia</cite> paackages
or modules share a single global unit registry called ureg. Convenience functions <code class="docutils literal"><span class="pre">Q_</span></code> for <code class="docutils literal"><span class="pre">Quantity</span></code> and <code class="docutils literal"><span class="pre">U_</span></code> for
<code class="docutils literal"><span class="pre">Quantity(1.0,</span> <span class="pre">unit_str)</span></code> are also defined. Examples of usage are provided in the Jupyter notebooks/tutorials.</p>
</div>
</div>
<div class="section" id="coordinate-systems">
<h1>Coordinate Systems<a class="headerlink" href="#coordinate-systems" title="Permalink to this headline">¶</a></h1>
<p>The general observer/target topocentric, cartesian coordinate system used in <cite>MORTICIA</cite> is +x towards North, +y towards
the East and +z towards the zenith. Zenith angles are polar angles measured from the +z axis. This is a left-handed
system and the alternative right-handed sytem is the same, except with +z towards nadir.</p>
<p>The global Earth Centered Earth Fixed (ECEF) coordinate system has the north pole in the +Z direction, the prime
meridian (0 deg longitude) in the +X direction and the +Y direction at 90 deg east longitude. This is a right-handed
coordinate system.</p>
<p>When dealing with sightlines and camera orientations, several conventions can be used. The
<a class="reference external" href="https://en.wikipedia.org/wiki/Euler_angles">Euler angles</a> provide (relative to a given coordinate system,
typically topocentric/geodetic) the view azimuth angle (VAZ = <span class="math">\(\alpha\)</span>) and view zenith angle (VZA =
<span class="math">\(\beta\)</span>). The camera roll is then the third Euler angle <span class="math">\(\gamma\)</span>.</p>
</div>
<div class="section" id="logging-warnings-and-exception-handling">
<h1>Logging Warnings and Exception Handling<a class="headerlink" href="#logging-warnings-and-exception-handling" title="Permalink to this headline">¶</a></h1>
<p>As a rule, <cite>MORTICIA</cite> does not use logging to files. Preferably, if any checking is performed, exceptions are thrown.
Informational messages should printed to the terminal using the <cite>logging.info()</cite> or <cite>logging.debug()</cite> calls.
Warnings that the user should take action on are provided through <cite>warnings.warn()</cite>. If the warning may relate to
the fact that <cite>MORTICIA</cite> code should be improved or debugged, it should be issued through <cite>logging.warning()</cite>.
<cite>MORTICIA</cite> internal modules do not define any logging handlers or filters. This is left to the user.</p>
</div>
<div class="section" id="general-terminology-and-conventions">
<h1>General Terminology and Conventions<a class="headerlink" href="#general-terminology-and-conventions" title="Permalink to this headline">¶</a></h1>
<div class="section" id="radiometry">
<h2>Radiometry<a class="headerlink" href="#radiometry" title="Permalink to this headline">¶</a></h2>
<p>Confusion may arise over the inconsistent use of radiometric terms. In the radiative transfer (RT) community, what is
called &#8220;flux&#8221; (or more helpfully &#8220;flux density&#8221;) is called &#8220;irradiance&#8221; in the radiometry community.
In the radiometry community, &#8220;flux&#8221; means
optical power (not per unit area). In the RT community, what is called &#8220;intensity&#8221; is called &#8220;radiance&#8221; in the
radiometry community. In the radiometry community, &#8220;intensity&#8221; means optical power per unit solid angle (not
per unit area). In MORTICIA, the terms &#8220;flux&#8221; and &#8220;irradiance&#8221; are used interchangeably. Optical power,
usually denoted <span class="math">\(\Phi\)</span>, will not be referred to as &#8220;flux&#8221;, but explicitly as &#8220;optical power&#8221;. The term
&#8220;intensity&#8221; is avoided as inherently ambiguous and the alternative term &#8220;radiance&#8221; is preferred. When dealing
with irradiance/flux or radiance per unit spectral interval, these are normally explicitly referred to as
&#8220;spectral irradiance/flux&#8221; or &#8220;spectral radiance&#8221;.</p>
<p>The term &#8220;mean intensity&#8221; is used in libRadtran/uvspec terminology to mean the actinic flux divided by
<span class="math">\(4\pi\)</span> steradians. Actinic flux has the same units as irradiance/flux and could equally well be
called actinic irradiance. A preferred term for &#8220;mean intensity&#8221; could be &#8220;actinic sterance&#8221;.
Actinic flux could also be referred to as &#8220;scalar irradiance&#8221;.</p>
</div>
<div class="section" id="camera-and-imager">
<h2>Camera and Imager<a class="headerlink" href="#camera-and-imager" title="Permalink to this headline">¶</a></h2>
<p>A <cite>Camera</cite> object in MORTICIA does <em>not</em> include a Lens - it is a camera body, including an FPA and a
digitisation stage (which may be fully integrated into the FPA chip - a so-called &#8220;camera on a chip&#8221;).
The <cite>Imager</cite> class incorporates a Camera and a Lens and is capable of producing actual imagery.</p>
</div>
<div class="section" id="modulation-transfer-function-calculation">
<h2>Modulation Transfer Function Calculation<a class="headerlink" href="#modulation-transfer-function-calculation" title="Permalink to this headline">¶</a></h2>
<p>For image modelling purposes, it is necessary to know the full 2D MTF, whereas the normal situation is that the
MTF is described using horizontal and vertical MTF profile functions. Suppose that <span class="math">\(\eta\)</span> and <span class="math">\(\xi\)</span> are
the spatial frequencies in the horizontal and vertical directions respectively and the <span class="math">\(M\!T\!F_\eta(\eta)\)</span> and
<span class="math">\(M\!T\!F_\xi(\xi)\)</span> are the 1D MTFs in the horizontal and vertical directions. The 2D MTF is then computed as
a rotationally weighted mean of the 1D MTFs as</p>
<div class="math">
\[M\!T\!F(\eta,\xi)=\frac{\eta^{2}M\!T\!F_{\eta}\left(\sqrt{\eta^{2}+\xi^{2}}\right)+\xi^{2}M\!T\!F_{\xi}\left(\sqrt{\eta^{2}+\xi^{2}}\right)}{\eta^{2}+\xi^{2}},\]</div>
<p>and if the sagittal spatial frequency is defined as <span class="math">\(\rho=\sqrt{\eta^{2}+\xi^{2}}\)</span>, then</p>
<div class="math">
\[M\!T\!F(\eta,\xi)=\frac{\eta^{2}M\!T\!F_{\eta}\left(\rho\right)+\xi^{2}M\!T\!F_{\xi}\left(\rho\right)}{\rho^{2}}.\]</div>
<p>It is assumed here that the horizontal and vertical MTFs are symmetrical about the origin.</p>
</div>
</div>


          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016, D Griffith, A Ramkilowan.
    </p>
  </div>

  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
  
</footer>
        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'1.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>